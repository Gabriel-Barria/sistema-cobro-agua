{% extends "base.html" %}

{% block title %}Tarifas - Sistema de Lecturas{% endblock %}

{% block content %}
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
    <h1 class="text-2xl font-bold">Configuracion de Tarifas</h1>
    <a href="{{ url_for('configuracion.index') }}" class="btn btn-ghost">
        <i class="fas fa-arrow-left"></i>
        <span class="hidden sm:inline">Volver</span>
    </a>
</div>

<div class="card bg-base-100 shadow max-w-xl mx-auto">
    <div class="card-body">
        <form method="POST">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text font-medium">Cargo Fijo ($)</span>
                    </label>
                    <input type="number" name="cargo_fijo" step="1" min="0"
                           value="{{ config.cargo_fijo|int if config else 0 }}"
                           class="input input-bordered" required>
                    <label class="label">
                        <span class="label-text-alt text-base-content/70">Monto fijo mensual por servicio</span>
                    </label>
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text font-medium">Precio por m3 ($)</span>
                    </label>
                    <input type="number" name="precio_m3" step="1" min="0"
                           value="{{ config.precio_m3|int if config else 0 }}"
                           class="input input-bordered" required>
                    <label class="label">
                        <span class="label-text-alt text-base-content/70">Precio por metro cubico consumido</span>
                    </label>
                </div>
            </div>

            {% if config %}
            <div class="alert alert-info mb-6">
                <i class="fas fa-calculator"></i>
                <div>
                    <p class="font-medium">Ejemplo de calculo:</p>
                    <p class="text-sm">
                        Consumo de 10 m3 = ${{ config.cargo_fijo|int|formato_pesos }} (fijo) +
                        10 x ${{ config.precio_m3|int|formato_pesos }} =
                        <strong>${{ (config.cargo_fijo + 10 * config.precio_m3)|int|formato_pesos }}</strong>
                    </p>
                </div>
            </div>
            {% endif %}

            <div class="card-actions justify-center">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i> Guardar Tarifas
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
